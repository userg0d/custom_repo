# Template file for 'iio-sensor-proxy-ssc'
pkgname=iio-sensor-proxy-ssc
version=3.8
revision=1
build_style=meson
configure_args="-Dsystemdsystemunitdir=/usr/lib/systemd/system/
 -Dgeoclue-user=_geoclue2
 -Dssc-support=true"
hostmakedepends="pkg-config glib-devel libxml2"
makedepends="libgudev-devel polkit-devel libssc-devel"
checkdepends="python3-dbusmock python3-psutil umockdev-devel gtk+3-devel"
conflicts="iio-sensor-proxy>=0"
shlib_provides="libssc.so.0"
provides="iio-sensor-proxy-${version}_${revision}"
short_desc="IIO accelerometer sensor to input device proxy (with Qualcomm SSC)"
maintainer="Andrea Brancaleoni <abc@pompel.me>"
license="GPL-3.0-or-later"
homepage="https://gitlab.freedesktop.org/hadess/iio-sensor-proxy"
changelog="https://gitlab.freedesktop.org/hadess/iio-sensor-proxy/-/raw/master/NEWS"
distfiles="https://gitlab.freedesktop.org/hadess/iio-sensor-proxy/-/archive/${version}/iio-sensor-proxy-${version}.tar.gz"
checksum=f7fb74bf75a7046be14926d4be3d1804f7fb048641116dce0bc0be847131f9d6

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -Dtests=true -Dgtk-tests=true"
fi

post_install() {
	vsv iio-sensor-proxy
}
